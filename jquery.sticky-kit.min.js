(function(){var h,m;h=this.jQuery||this.Zepto;m=h(window);h.fn.stick_in_parent=function(u){var k,l,c,t;l=function(a){var c,g,n,f,p,b,k,l,e,q,r,s;e=a.parent(u);c=parseInt(e.css("border-top-width"),10);l=parseInt(e.css("padding-top"),10);k=parseInt(e.css("padding-bottom"));r=e.offset().top+c+l;q=e.height();f=a.outerHeight(!0);console.log(a,"height:",f,"parent height:",q);if(f!==q)return s=h("<div />").css({width:a.outerWidth(!0),height:f,display:a.css("display"),"float":a.css("float")}),g=n=!1,p=void 0,
b=0,m.on("scroll",function(d){var c;d=m.scrollTop();null!=p&&(c=d-p);p=d;if(n){if(d<r&&(n=!1,b=0,s.detach(),a.css({position:""}).removeClass("is_stuck")),d+f+b>q+r?g||(g=!0,"static"===e.css("position")&&e.css({position:"relative"}),a.css({position:"absolute",bottom:k,top:""})):g&&(g=!1,a.css({position:"fixed",bottom:"",top:0})),d=m.height(),f>d&&!g)return b-=c,b=Math.max(d-f,b),b=Math.min(0,b),a.css({top:b+"px"})}else if(d>r)return n=!0,a.css({position:"fixed",top:b}).addClass("is_stuck").after(s)})};
c=0;for(t=this.length;c<t;c++)k=this[c],l(h(k));return this}}).call(this);
